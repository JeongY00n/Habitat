# 코스터 기능 명세

# [코스터의 기능]

### 1. 음료 섭취량 파악

- **센서** : 압력센서 4개
- 센서를 사용해서 무게가 잘 측정되면 1개 또는 2개만 사용해도 될듯
- `**시작 시점**` : 0점 조정 이후, 종료 시점 이후
- `**종료 시점**` : 시작 시점의 압력보다 줄어든 값이 입력됨
- `**섭취량**` = `**시작 시점**` - `**종료 시점**`
- `**시작 시점**`의 값 = `**종료 시점**`의 값
- **블루투스 연결**
    - Flutter 에 `**섭취량**` 전달
- **블루투스 끊김**
    - ESP32 메모리에 `**섭취량**` 저장
        - 변화가 생길 때 마다 **시간별** 로 저장할 것인지?
        - ~~블루투스가 끊긴 시점부터 연결된 시점까지의 **총 변화량** 을 저장해서 전달할 것 인지?~~
    - 앱단에 데이터 전송 후 메모리 초기화

### 2. 음료 선택

- **센서** : 터치센서 3개
    - 물, 카페인 음료, 비카페인 음료
    - 각 버튼을 누르면 해당 음료에 대해 0점 조정
    - **0점 버튼이 눌리기 전**
        - `0점`(변수생성) : 압력센서의 값을 저장
    - **0점 버튼이 눌린 후**
        - 변화된 압력센서 값에서 `0점` 변수 빼주기
        
- **센서** : 네오픽셀 8개
    - 물, 카페인 음료, 비카페인 음료 선택 버튼이 눌림을 led 색상으로 확인

### 3. 목표 달성도 확인

- **센서** : 네오픽셀 8개
- **물 마시는 중**
    - 12.5% 증가할 때마다 하나씩 올라감
    - 순서 생각해서 GPIO 세팅
- **하루 목표 달성**
    - 모든 LED가 동시에 켜짐

### 4. 물 마시기 알림

- **센서** : 네오픽셀 8개
- **~~사용자가 시간을 설정~~**
    - ~~가장 최근에 물을 마시고 `사용자가 설정한 시간`이 흐르면 물 마시기 실천을 알림~~
    - ~~하루의 목표 달성알림과는 다른 방식으로 LED의 모든 불빛이 켜짐~~
    - `~~사용자가 설정한 시간` : 물을 얼마나 마셨는지를 확인하면서 시간도 확인~~
- **사용자가 시간을 설정하지 않음**
    - 1시간 빛나 근데 안마셔? 그럼 30분 마다 빛남 마시면 초기화

### 5. 컵에 생기는 물방울 흡수

- 코르크
- 코르크가 물을 흡수하게 되면 코르크의 무게가 늘어나게됨
    - 1g도 안되지 않을가..?